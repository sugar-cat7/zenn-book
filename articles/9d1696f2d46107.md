---
title: "Honoã§Service Workerã‚’åˆ©ç”¨ã™ã‚‹"
emoji: "ğŸ“•"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [hono, typescript, service-worker]
published: false
---

ã“ã‚“ã«ã¡ã¯ã€[sugar-cat](https://twitter.com/sugar235711)ã§ã™ã€‚

ã“ã®è¨˜äº‹ã¯[Hono Advent Calendar](https://qiita.com/advent-calendar/2024/hono) 2024ã®12æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚

## ã¯ã˜ã‚ã«
Honoã§ã¯v4.5ç³»ã§Service Workerã®ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
ã“ã®ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ãƒˆã‚„å„ç¨®å‡¦ç†ã‚’Honoã®æ›¸ãå‘³ã®ã¾ã¾å®Ÿè£…ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

## Service Workerã«ã¤ã„ã¦

Service Workerã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ã¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®é–“ã§ãƒ—ãƒ­ã‚­ã‚·ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚  
ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§å‹•ä½œã—ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚„ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ãªã©ã®ã‚¿ã‚¹ã‚¯ã‚’å‡¦ç†ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ã—ã¦åˆ©ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

https://developer.mozilla.org/ja/docs/Web/API/Service_Worker_API

ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®å‹•ç”»ãŒã‚ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚  
https://www.youtube.com/watch?v=AIdQkNYsViM

ã“ã®Service Workerã«ã¯ã€`fetch`ã‚¤ãƒ™ãƒ³ãƒˆãŒã‚ã‚Šã¾ã™ã€‚
https://developer.mozilla.org/ja/docs/Web/API/FetchEvent

ã“ã®`fetch`ã‚¤ãƒ™ãƒ³ãƒˆã¯ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ãŒãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¡Œã†éš›ã«ã€ã‚µãƒ¼ãƒ“ã‚¹ãƒ¯ãƒ¼ã‚«ãƒ¼ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ã§ç™ºç”Ÿã—`addEventListener("fetch", (event) => {});`ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã§ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å·®ã—æ›¿ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã‚‚ã®ã§ã™ã€‚(è¦ã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’Proxyã§ãã¾ã™)

ãã—ã¦ã“ã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã«**Honoã®ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼**ã‚’å™›ã¾ã›ã‚‹ã“ã¨ã§Service Workerã®é–‹ç™ºãŒã—ã‚„ã™ããªã‚Šã¾ã™ã€‚
https://hono.dev/docs/getting-started/service-worker

ã‚¤ãƒ™ãƒ³ãƒˆã¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç™»éŒ²ã—ãŸ`ServiceWorkerGlobalScope`ã«é…ä¿¡ã•ã‚Œã¾ã™ã€‚  
ä»¥ä¸‹ã«å‡¦ç†ã®æµã‚Œã‚’ç¤ºã—ã¾ã™ã€‚

1. ãƒ–ãƒ©ã‚¦ã‚¶ãŒ`ServiceWorkerGlobalScope`ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
2. `fetch`ã‚¤ãƒ™ãƒ³ãƒˆã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’æä¾›ã—ã¾ã™ã€‚
3. ã‚µãƒ¼ãƒ“ã‚¹ãƒ¯ãƒ¼ã‚«ãƒ¼ã§ã“ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’Honoã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã¨ã—ã¦å®Ÿè£…ã•ã‚Œã¦ãŠã‚Šã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã—ã¾ã™ã€‚

```mermaid
sequenceDiagram
    participant Browser as ãƒ–ãƒ©ã‚¦ã‚¶
    participant SW as ã‚µãƒ¼ãƒ“ã‚¹ãƒ¯ãƒ¼ã‚«ãƒ¼
    participant Hono as Honoãƒãƒ³ãƒ‰ãƒ©ãƒ¼
    participant Network as ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯

    Browser->>SW: Fetchãƒªã‚¯ã‚¨ã‚¹ãƒˆç™ºç”Ÿ
    SW->>Hono: Fetchã‚¤ãƒ™ãƒ³ãƒˆã‚’Honoã§å‡¦ç†
    Hono-->>SW: ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ (ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¾ãŸã¯ç›´æ¥å¿œç­”)
    alt ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ãŒå¿…è¦ãªå ´åˆ
        SW->>Network: ãƒªã‚½ãƒ¼ã‚¹è¦æ±‚
        Network-->>SW: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒªã‚½ãƒ¼ã‚¹
    end
    SW-->>Browser: ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”å´
``` 

### ä½¿ã„æ–¹

#### Service Workerã®ç™»éŒ²

Service Workerã‚’ç™»éŒ²ã™ã‚‹ã«ã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§`ServiceWorkerContainer.register()`ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

https://developer.mozilla.org/ja/docs/Web/API/ServiceWorkerContainer/register#updateviacache

```ts:client.ts
navigator.serviceWorker.register('/service-worker.js', {
  scope: '/sw',
  type: 'module',
  updateViaCache: 'none',
});
```

:::message
- `scope`:
  - ã‚µãƒ¼ãƒ“ã‚¹ãƒ¯ãƒ¼ã‚«ãƒ¼ãŒåˆ¶å¾¡ã™ã‚‹URLç¯„å›²ã‚’æŒ‡å®šã—ã¾ã™ã€‚
  - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ã‚µãƒ¼ãƒ“ã‚¹ãƒ¯ãƒ¼ã‚«ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒé…ç½®ã•ã‚Œã¦ã„ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãªã‚Šã¾ã™ã€‚
  - [ã‚µãƒ¼ãƒãƒ¼ã§`Service-Worker-Allowed`ãƒ˜ãƒƒãƒ€ãƒ¼](https://w3c.github.io/ServiceWorker/#service-worker-allowed)ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€ã‚¹ã‚³ãƒ¼ãƒ—ã‚’å¤‰æ›´å¯èƒ½ã§ã™ã€‚

- `type`:
  - `module`ã‚’æŒ‡å®šã™ã‚‹ã¨ES Modulesã‚’ä½¿ç”¨å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

- `updateViaCache`:
  - Service WorkerãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã™ã‚‹éš›ã«ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ã‹ã©ã†ã‹ã‚’è¨­å®šã—ã¾ã™ã€‚
:::

#### Service Workerå†…ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§Honoã‚’åˆ©ç”¨ã™ã‚‹

æ¬¡ã«ã€Service Workerã®[FetchEvent](https://developer.mozilla.org/ja/docs/Web/API/FetchEvent)ã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã¨ã—ã¦Honoã‚’åˆ©ç”¨ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

```ts:service-worker.ts
// https://github.com/microsoft/TypeScript/issues/14877
declare const self: ServiceWorkerGlobalScope;

import { Hono } from 'hono';
import { handle } from 'hono/service-worker';

const app = new Hono().basePath('/sw'); // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®Service Workerã®ã‚¹ã‚³ãƒ¼ãƒ—ã‚’æŒ‡å®š
app.get('/', (c) => c.text('Hello World'));

self.addEventListener('fetch', handle(app));
```

`hono/service-worker`ã®ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ãŒæä¾›ã•ã‚Œã¦ãŠã‚Šã€Honoã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ãã®ã¾ã¾æ¸¡ã™ã ã‘ã§ã€ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ãƒˆã—ãŸã„fetchã®ãƒ‘ã‚¹ã‚’é€šå¸¸ã®APIã¨åŒæ§˜ã«è¨˜è¿°ã§ãã¾ã™ã€‚  
ttps://github.com/honojs/hono/blob/47bb23c575a93d5fed4721935481a6a4cbf5cf1a/src/adapter/service-worker/handler.ts#L14-L34

ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãŠå¥½ã¿ã®ãƒ„ãƒ¼ãƒ«ã§ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«ã—ã€å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ã™ã‚‹ã“ã¨ã§Service WorkerãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã™ã€‚

ä¸Šè¨˜ã®ä¾‹ã§ã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã‹ã‚‰`fetch('/sw')`ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæ¥ãŸå ´åˆã€ä»®ã«`/sw`ã¨ã„ã†ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§å®šç¾©ã•ã‚ŒãŸAPIãŒå­˜åœ¨ã—ã¦ã‚‚ã€`Hello World`ã¨ã„ã†ãƒ†ã‚­ã‚¹ãƒˆã‚’è¿”ã™ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

## Next.jsã§Service Workerã‚’åˆ©ç”¨ã™ã‚‹(å®Ÿè·µ)

å®Ÿéš›ã®é–‹ç™ºã§ã¯ã€æ§˜ã€…ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨çµ„ã¿åˆã‚ã›ã¦Service Workerã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚  
ã“ã“ã§ã¯Next.js (App Router) ã¨Honoã€Service Workerã‚’çµ„ã¿åˆã‚ã›ã¦ã€OpenAIã‹ã‚‰ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’å—ã‘å–ã‚Šè¡¨ç¤ºã™ã‚‹ç°¡å˜ãªChatGPTãƒ©ã‚¤ã‚¯ãªã‚¢ãƒ—ãƒªã‚’ä½œæˆã—ã¾ã™ã€‚  
UIã¯é©å½“ã«v0ã§ä½œæˆã—ã¦ã„ã¾ã™ã€‚

![alt text](/images/service-worker/1.png)

ã‚³ãƒ¼ãƒ‰å…¨ä½“ã¯ä¸‹è¨˜ã«ã‚ã‚Šã¾ã™ã€‚
https://github.com/sugar-cat7/example-hono-service-worker


ã¾ãšã€OpenAIã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’è¿”ã™ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚  
ä»Šå›ã¯ç°¡å˜ã®ãŸã‚ã€API Routesã§ä½œæˆã—ã¾ã™ã€‚  

https://hono.dev/docs/getting-started/vercel

ã¾ãŸã€OpenAIã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã¨Honoã®Stream Helperã‚’çµ„ã¿åˆã‚ã›ã¦åˆ©ç”¨ã™ã‚‹ãŸã‚ã«ã€AI SDKã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ç”¨ã—ã¾ã™ã€‚  
https://sdk.vercel.ai/docs/reference/ai-sdk-ui/use-chat

```ts:app/api/[[...route]]/route.ts
import { createOpenAI } from '@ai-sdk/openai';
import { streamText } from 'ai';
import { Hono } from 'hono';
import { stream } from 'hono/streaming';
import { handle } from 'hono/vercel';

export const runtime = 'edge';

const openai = createOpenAI({
  compatibility: 'strict',
  organization: "xxx",
  project: "xxx",
  apiKey: "xxx",
  baseURL: "xxx",
});

const app = new Hono().basePath('/api');

app.post('/chat', async (c) => { // /api/chatã§ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’è¿”ã™
  const r = await c.req.json();
  return stream(c, async (stream) => {
    const result = await streamText({
      model: openai('gpt-4o-mini'),
      messages: r.messages,
    });
    await stream.pipe(result.toDataStream());
  });
});

export const GET = handle(app);
export const POST = handle(app);
```

æ¬¡ã«ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®å®šç¾©ã§ã™ã€‚  
SSEã‚’æ‰±ã„ã‚„ã™ãã™ã‚‹ãŸã‚ã«ã€VercelãŒæä¾›ã—ã¦ã„ã‚‹`AI SDK`ã®`useChat`ãƒ•ãƒƒã‚¯ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

```tsx:app/page.tsx
'use client';
import { useChat } from 'ai/react';
// ç•¥

export default function Page() {
  const { messages, input, handleInputChange, handleSubmit } = useChat({
    api: '/sw/chat', // Service Workerã§å®šç¾©ã—ãŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å©ã
  });

  useEffect(() => {
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker
        .register("/sw.js", { scope: "/", type: "module" }) // Service Workerã‚’ç™»éŒ²
        .then(
          function (_registration) {
            console.log("Service Workerã®ç™»éŒ²ã«æˆåŠŸã—ã¾ã—ãŸ");
          },
          function (_error) {
            console.log("Service Workerã®ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ");
          }
        );
    }
  }, []);

 // çœç•¥
}
```

æ¬¡ã«ã€Service Workerã®å®šç¾©ã§ã™ã€‚  
ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«å‰ã®ã‚³ãƒ¼ãƒ‰ãªã®ã§TypeScriptã§è¨˜è¿°ã—ã¦ã„ã¾ã™ã€‚  
ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§ä½¿ç”¨ã—ã¦ã„ã‚‹`useChat`ã§ã¯å†…éƒ¨çš„ã«POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¦ãŠã‚Šã€Service Workerã‚’åˆ©ç”¨ã—ã¦ã“ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ãƒˆã—ã€OpenAIã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚  
ã©ã®ã‚ˆã†ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ã‚ã£ã¦ã‚‚fetchã‚’é€šã‚‹ã‚‚ã®ã§ã‚ã‚Œã°ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ãƒˆå¯èƒ½ã§ã‚ã‚Šã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå†…ã§æŠ½è±¡åŒ–ã•ã‚ŒãŸAPIãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚

`ServiceWorkerGlobalScope`ã®å‹è£œå®Œã‚’æœ‰åŠ¹ã«ã™ã‚‹ãŸã‚ã«ã€`tsconfig`ã®`compilerOptions`ã«`"lib": ["webworker"]`ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚  
`/sw/chat`ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæ¥ãŸå ´åˆã«ã€`/api/chat`ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãƒ—ãƒ­ã‚­ã‚·ã—ã€ãã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’SSEã§è¿”ã™ã‚ˆã†ã«ã—ã¾ã™ã€‚

```ts:lib/sw.ts
import { Hono } from "hono";
import { handle } from "hono/service-worker";
import { streamText } from "hono/streaming";

// https://github.com/microsoft/TypeScript/issues/14877
declare const self: ServiceWorkerGlobalScope;

const app = new Hono().basePath("/sw");

app.post("/chat", async (c) => {  // /sw/chatã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæ¥ãŸå ´åˆã«ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ãƒˆ
  const { messages } = await c.req.json();
  return streamText(c, async (stream) => {
    const response = await fetch('/api/chat', { // API Routesã®chatã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãƒ—ãƒ­ã‚­ã‚·
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ messages }),
    });

    if (!response.body) {
      await stream.write('data: [ERROR] ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ãŒå­˜åœ¨ã—ã¾ã›ã‚“\n\n');
      return;
    }

    const reader = response.body.getReader();
    const decoder = new TextDecoder();

    try {
      while (true) {
        const { done, value } = await reader.read();
        if (done) break;

        const text = decoder.decode(value, { stream: true });
        await stream.write(text);
      }
    } finally {
      await stream.write('data: [DONE]\n\n');
      reader.releaseLock();
    }
  });
});

self.addEventListener("fetch", handle(app));
```

ä¸Šè¨˜ã‚’å‹•ä½œã•ã›ã‚‹ã¨ã€Service Workerã‚’åˆ©ç”¨ã—ã¦APIã¸ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒé£›ã‚“ã§ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚(æ­¯è»Šã‚¢ã‚¤ã‚³ãƒ³ãŒService Worker)  
![alt text](/images/service-worker/2.gif)

ã“ã®å®Ÿè£…ã§ã¯å˜ç´”ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘æµã—ã¦ã„ã¾ã™ãŒã€å¿œç”¨ã™ã‚Œã°ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§ã®å…¥åŠ›å€¤ã®ã‚µãƒ‹ã‚¿ã‚¤ã‚ºã‚„ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãªã©æ§˜ã€…ãªå‡¦ç†ã‚’ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã‹ã‚‰åˆ†é›¢ã—ã¦Service Workerã§è¡Œã†ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

### ã¾ã¨ã‚
Honoã‚’çµ„ã¿åˆã‚ã›ã¦Service Workerã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€FetchEventã®æ‰±ã„ãŒå°‘ã—æ¥½ã«ãªã‚Šã¾ã™ã€‚